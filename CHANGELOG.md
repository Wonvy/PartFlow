# 📝 PartFlow 更新日志

## [0.1.4] - 2025-10-23

### 📦 数据导入导出功能上线

新增完整的数据导入导出功能，支持 CSV 和 JSON 格式！

#### ✨ 新增功能

- ✅ **数据导出**
  - 导出零件为 CSV/JSON
  - 导出分类为 CSV/JSON
  - 导出位置为 CSV/JSON
  - 完整备份（所有数据）
  - 文件名自动添加时间戳
  - CSV 文件支持中文（BOM）

- ✅ **数据导入**
  - 导入零件（JSON/CSV）
  - 导入分类（JSON）
  - 导入位置（JSON）
  - 完整备份恢复
  - 导入结果统计
  - 详细错误信息展示

- ✅ **数据管理页面**
  - 新增"数据"标签页
  - 极简风格设计
  - 实时状态提示
  - 安全警告提示

#### 🎨 用户体验

- 💾 一键导出，自动下载
- 📥 拖拽或点击选择文件
- 📊 导入结果实时统计
- ⚠️ 数据验证和错误提示
- 🛡️ 不删除现有数据

#### 🛠️ 技术实现

**后端 API**:
- `GET /api/export/parts/{format}` - 导出零件
- `GET /api/export/categories/{format}` - 导出分类
- `GET /api/export/locations/{format}` - 导出位置
- `GET /api/export/all/json` - 完整备份
- `POST /api/import/parts/{format}` - 导入零件
- `POST /api/import/all/json` - 恢复备份

**前端组件**:
- `DataManager.tsx` - 数据管理页面
- 支持 CSV 和 JSON 格式
- 文件选择和上传处理
- 结果展示和错误处理

---

## [0.1.3] - 2025-10-23

### 🗄️ 数据持久化与界面增强

重大更新！集成 SQLite 数据库，数据永久保存，并完善分类/位置管理功能！

#### ✨ 新增功能

- ✅ **SQLite 数据持久化**
  - 所有数据永久保存，重启不丢失
  - 数据库自动初始化
  - 完整的数据访问层（DAO）
  - 外键约束保证数据完整性
  - 索引优化查询性能

- ✅ **分类管理增强**
  - 编辑分类名称和描述
  - 删除分类（带确认对话框）
  - 点击分类卡片查看对应零件
  - 显示分类下的零件数量
  - 卡片选中状态高亮

- ✅ **位置管理增强**
  - 编辑位置名称和描述
  - 删除位置（带确认对话框）
  - 点击位置卡片查看对应零件
  - 显示位置中的零件数量
  - 卡片选中状态高亮

- ✅ **库存变动历史**
  - API 支持查询零件库存历史
  - 记录入库/出库操作
  - 操作原因和操作人记录

#### 🎨 用户体验

- 💾 数据可靠性大幅提升
- ✏️ 分类/位置可随时修改
- 📊 一键查看分类/位置下的零件
- 🎯 直观的卡片选中反馈
- ⚠️ 删除操作安全确认

#### 🛠️ 技术实现

**数据库**:
- SQLite 3 本地数据库
- 5 张核心表：parts、categories、locations、inventory_changes、tags
- 完整的外键约束和级联操作
- 6 个优化索引提升查询性能

**数据访问层**:
- `PartsDAO` - 零件数据操作
- `CategoriesDAO` - 分类数据操作
- `LocationsDAO` - 位置数据操作
- `InventoryDAO` - 库存变动记录

**UI 组件**:
- 表单双模式（创建/编辑）
- 零件列表展开/收起
- 条件渲染优化性能

#### 📖 文档更新

- 📋 项目总结（更新开发进度）
- 📝 CHANGELOG（本更新日志）
- 📖 README（功能列表更新）

---

## [0.1.2] - 2025-10-23

### 📷 相机拍照功能上线

新增跨平台相机拍照功能，支持 Web、移动端、平板！

#### ✨ 新增功能

- ✅ **Web 端相机组件**
  - 实时摄像头预览
  - 前后置摄像头切换
  - 参考线辅助对齐
  - 一键拍照
  - 全屏拍照界面

- ✅ **移动端相机组件**
  - 原生相机体验
  - 前后摄像头快速切换
  - 高清画质（最高 1920×1080）
  - 全屏沉浸式界面
  - 拍照提示与引导

- ✅ **相册选择功能**
  - 从设备相册选择图片
  - 图片裁剪和调整
  - 相册权限管理

- ✅ **权限管理**
  - 相机权限请求
  - 相册权限请求
  - 友好的权限说明
  - 权限拒绝处理

#### 🎨 用户体验

- 📱 移动端优先设计
- 💻 Web 端完美适配
- 🎯 参考线辅助构图
- ⚡ 流畅的拍照体验
- 🔄 灵活的摄像头切换

#### 📖 文档更新

- 📷 图片上传指南（新增相机拍照章节）
- 📋 项目总结（更新完成功能）
- 🎬 功能演示（待更新）

#### 🛠️ 技术实现

**Web 端**:
- 使用 `MediaDevices API`
- Canvas 图片捕获
- Base64 编码存储
- 响应式全屏界面

**移动端**:
- `expo-camera` 相机功能
- `expo-image-picker` 相册选择
- React Native 原生体验
- 跨平台权限管理

---

## [0.1.1] - 2025-10-23

### 🎉 图片上传功能上线

新增强大的图片上传功能，支持多种上传方式！

#### ✨ 新增功能

- ✅ **图片上传组件**
  - 文件选择上传
  - 拖拽上传
  - 剪贴板粘贴（Ctrl+V / Cmd+V）⭐
  - 图片预览
  - 图片更换/删除

- ✅ **零件图片展示**
  - 列表中显示缩略图
  - 自动缩放适配
  - 优雅的展示效果

- ✅ **文档更新**
  - 新增图片上传指南
  - 更新使用指南
  - 更新功能演示

#### 🎨 用户体验

- 支持 JPG、PNG、GIF 格式
- 最大 5MB 文件限制
- 实时预览
- 拖拽高亮提示

---

## [0.1.0] - 2025-10-23

### 🎉 首个版本发布

这是 PartFlow 零件管理系统的首个可用版本！

---

### ✨ 新增功能

#### 零件管理
- ✅ 零件列表展示（卡片式）
- ✅ 创建新零件（完整表单）
- ✅ 编辑零件信息
- ✅ 删除零件（带确认）
- ✅ 关键词搜索（名称、规格、材质）
- ✅ 快速入库操作 (+10 按钮)
- ✅ 快速出库操作 (-10 按钮)

#### 高级搜索与筛选
- ✅ 按分类筛选
- ✅ 按位置筛选
- ✅ 低库存筛选
- ✅ 多条件组合
- ✅ 一键清除筛选

#### 分类管理
- ✅ 分类列表展示
- ✅ 创建新分类
- ✅ 分类与零件关联

#### 位置管理
- ✅ 位置列表展示
- ✅ 创建新位置
- ✅ 位置与零件关联

#### 用户界面
- ✅ 响应式设计
- ✅ 多页面导航
- ✅ 即时反馈
- ✅ 错误提示
- ✅ 加载状态

---

### 🏗️ 技术架构

#### Monorepo 结构
- ✅ 9 个 workspace 包
- ✅ pnpm workspaces
- ✅ 统一配置管理

#### 前端
- ✅ React 18 + TypeScript
- ✅ Vite 5 构建
- ✅ 模块化组件

#### 后端
- ✅ Fastify 4 + Node.js
- ✅ RESTful API
- ✅ CORS 支持

#### 数据模型
- ✅ Part（零件）
- ✅ Category（分类）
- ✅ Location（位置）
- ✅ InventoryChange（库存变动）
- ✅ Tag（标签）

---

### 📖 文档

- ✅ 项目展示（完整特性介绍）
- ✅ 开发说明（技术架构）
- ✅ 快速开始（5 分钟入门）
- ✅ 使用指南（详细功能说明）
- ✅ API 文档（完整接口文档）
- ✅ 功能演示（演示脚本）
- ✅ 项目总结（开发计划）

---

### 🎯 性能指标

| 操作 | 响应时间 |
|------|---------|
| 加载零件列表 | < 50ms |
| 创建零件 | < 100ms |
| 更新库存 | < 50ms |
| 搜索零件 | < 50ms |
| 应用筛选 | < 50ms |

---

### 📊 项目规模

- **Workspace 包**: 9 个
- **TypeScript 文件**: 35+ 个
- **React 组件**: 15+ 个
- **API 路由**: 18 个
- **代码行数**: 3000+ 行
- **文档页面**: 7 个

---

### 🔧 开发工具

- ✅ TypeScript 全项目支持
- ✅ ESLint + Prettier 配置
- ✅ 路径别名 (`@partflow/*`)
- ✅ 热重载开发

---

### 📦 依赖管理

- **总依赖数**: ~1100 packages
- **安装时间**: < 2 分钟
- **构建时间**: < 30 秒

---

### 🎨 UI/UX

- ✅ 简洁现代的界面
- ✅ 统一的配色方案
- ✅ 流畅的交互体验
- ✅ 完善的错误处理

---

### 🚀 部署

- ✅ 本地开发环境
- ✅ 生产构建配置
- 🟡 Docker 支持（待实现）
- 🟡 CI/CD（待实现）

---

### 🔮 已知限制

- ⚠️ 使用内存存储，重启后数据丢失
- ⚠️ 暂不支持图片上传
- ⚠️ 暂不支持多用户
- ⚠️ 暂不支持数据导入/导出

---

### 🛣️ 下一步计划

#### v0.2.0 - 数据持久化
- [ ] 集成 SQLite 数据库
- [ ] 数据备份与恢复
- [ ] 数据迁移工具

#### v0.3.0 - 图片支持
- [ ] 零件图片上传
- [ ] 图片预览
- [ ] 图片压缩

#### v0.4.0 - 移动端
- [ ] 相机拍照
- [ ] 条码扫描
- [ ] 离线模式

#### v1.0.0 - 完整功能
- [ ] AI 识别
- [ ] 用户系统
- [ ] 统计报表
- [ ] 导入/导出

---

### 🙏 致谢

感谢所有参与开发和测试的朋友！

---

### 📄 许可证

MIT License

---

**PartFlow v0.1.0 - 让零件管理变得简单高效！** 🚀

