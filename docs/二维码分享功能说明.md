# 二维码分享功能说明

## 功能概述

在 Web 端页面的右上角，加号按钮旁边新增了一个二维码图标按钮。点击该按钮可以生成当前页面的二维码，方便手机扫码访问。

## 使用方法

### 1. 启动服务

确保已经启动了 Web 端服务器：

```bash
cd apps/web
pnpm dev
```

服务器会显示类似以下的输出：

```
VITE v5.4.21  ready in 426 ms
➜  Local:   http://localhost:5173/
➜  Network: http://10.102.208.152:5173/
➜  Network: http://172.18.224.1:5173/
➜  Network: http://10.0.0.3:5173/
```

### 2. 生成二维码

1. 在浏览器中打开页面（通常是 `http://localhost:5173/`）
2. 点击页面右上角的二维码图标（📱）
3. 会弹出一个模态框，显示当前页面的二维码

### 3. 手机扫码访问

#### 方式一：直接访问局域网地址（推荐）

1. 查看终端中 Vite 显示的 Network 地址
2. 在浏览器中用这些地址替换 localhost，例如：
   - `http://10.102.208.152:5173/`
   - `http://192.168.1.100:5173/`
3. 点击二维码图标，生成的二维码就会包含局域网地址
4. 用手机扫描二维码即可访问

#### 方式二：查看可用地址

在二维码模态框中，会显示：
- 当前访问的 URL
- 可用的网络地址列表（如果有的话）
- 使用提示

## 注意事项

1. **同一局域网**：确保手机和电脑连接在同一个 WiFi 网络
2. **防火墙设置**：⚠️ **Windows 系统必须设置防火墙**，否则手机无法访问
3. **使用局域网 IP**：如果当前使用 localhost 访问，需要用局域网 IP 地址替换 localhost

## Windows 防火墙设置（重要！）

### 快速设置（推荐）

以**管理员身份**运行 PowerShell，执行：

```powershell
.\scripts\open-firewall.ps1
```

这个脚本会自动：
- ✅ 添加 5173 端口（Web前端）的防火墙规则
- ✅ 添加 3333 端口（后端API）的防火墙规则
- ✅ 显示当前可用的局域网地址

### 手动设置

如果不想运行脚本，可以手动添加防火墙规则：

1. 按 `Win + R`，输入 `wf.msc`，回车
2. 点击"入站规则" → "新建规则"
3. 选择"端口" → TCP → 输入端口 `5173`
4. 选择"允许连接" → 勾选所有网络类型
5. 完成

详细步骤请查看：[Windows防火墙设置指南.md](./Windows防火墙设置指南.md)

### 关闭防火墙规则

开发完成后，可以关闭防火墙规则：

```powershell
.\scripts\close-firewall.ps1
```

## 技术实现

- 使用 `qrcode.react` 库生成二维码
- 自动检测当前访问的 URL
- 显示可用的网络地址
- 提供清晰的使用提示

## 界面设计

二维码按钮采用极简设计风格：
- 白色背景
- 灰色边框
- 悬停时有轻微的放大和背景变化效果
- 使用 SVG 图标表示二维码

